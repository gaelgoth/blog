<!doctype html>
<html lang="en-US">
  <head prefix="og: https://ogp.me/ns#">
    <meta charset="utf-8" />
    <meta name="generator" content="gh:importantimport/urara" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="manifest" crossorigin="use-credentials" href="/manifest.webmanifest" />
    <link rel="alternate" type="application/feed+json" href="/feed.json" />
    <link rel="alternate" type="application/atom+xml" href="/atom.xml" />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />
    <meta http-equiv="content-security-policy" content="style-src 'self' 'unsafe-inline' https://giscus.app">
		<link href="../../_app/immutable/assets/0.CPPcyzel.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/posts.D4gQgZwN.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.6hVF5jkV.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.CRIlJ_ql.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/scheduler.FGUOCI5T.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.BI7v63FY.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.B8tIka57.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.D6kgxu3v.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.DPb7ZaWV.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.ijsKtju2.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/posts.BHJCaHx_.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/icon.B8P-0mR_.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/5.DDSHOQ-Y.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/post_layout.C2tSXcAq.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/footer.BMJ1WMWW.js"><title>How to use DNS and TLS in your homelab | Gaël G.</title><!-- HEAD_svelte-1592q3p_START --><!-- HEAD_svelte-1592q3p_END --><!-- HEAD_svelte-1kxdj3d_START --><link rel="shortcut icon" href="https://blog.gothuey.dev/favicon.png" sizes="48x48" type="image/png"><link rel="apple-touch-icon" href="https://blog.gothuey.dev/assets/any@180.png" sizes="180x180" type="image/png"><link rel="icon" href="https://blog.gothuey.dev/assets/any@192.png" sizes="192x192" type="image/png"><!-- HEAD_svelte-1kxdj3d_END --><!-- HEAD_svelte-1g590ms_START --><meta name="theme-color"><!-- HEAD_svelte-1g590ms_END --><!-- HEAD_svelte-abrfj_START --><meta name="author" content="Gaël G."><link rel="canonical" href="https://blog.gothuey.dev/2023/dns-setup-homelab">  <meta name="keywords" content="Home lab, Container"> <meta name="description" content="Easy TLS certificate set up with Nginx Proxy Manager"><!-- HEAD_svelte-abrfj_END --><!-- HEAD_svelte-4dky5b_START --><meta property="og:site_name" content="Gaël G."><meta property="og:locale" content="en-US"><meta property="og:type" content="article"> <meta property="og:title" content="How to use DNS and TLS in your homelab"> <meta property="og:description" content="Easy TLS certificate set up with Nginx Proxy Manager"> <meta property="og:image" content="https://blog.gothuey.dev/2023/dns-setup-homelab/npm-ssl-certificate.webp"> <meta name="twitter:card" content="summary_large_image"> <meta property="article:tag" content="Home lab"><meta property="article:tag" content="Container"> <meta property="og:url" content="https://blog.gothuey.dev/2023/dns-setup-homelab"> <meta property="article:author" content="Gaël G."> <meta property="article:published_time" content="2023-08-01T00:00:00.000Z"> <meta property="article:modified_time" content="2025-01-25T23:43:32.794Z"><!-- HEAD_svelte-4dky5b_END -->
  </head>
  <body itemscope itemtype="https://schema.org/WebPage">
    <div style="display: contents">      <header id="header" class="fixed z-50 w-full transition-all duration-500 ease-in-out border-b-2 border-transparent max-h-[4.125rem] false"><div class="navbar"><div class="navbar-start">  <div class="dropdown lg:hidden"><label for="navbar-dropdown" tabindex="0" class="btn btn-square btn-ghost" data-svelte-h="svelte-rz1qrs"><span class="i-heroicons-outline-menu-alt-1"></span></label> <ul id="navbar-dropdown" tabindex="0" class="menu menu-compact dropdown-content bg-base-100 text-base-content shadow-lg rounded-box min-w-max max-w-52 p-2"><li><a href="/">Home</a> </li><li><a href="https://photo.gothuey.dev/">Photography</a> </li></ul></div> <div class="swap order-last hidden lg:inline-grid"><button class="swap-on btn btn-ghost text-base font-normal normal-case transition-all duration-200 hidden"></button> <ul class="swap-off menu menu-horizontal p-0"><li><a class="!rounded-btn" href="/">Home</a> </li><li><a class="!rounded-btn" href="https://photo.gothuey.dev/">Photography</a> </li></ul></div> <a href="/" class="btn btn-ghost normal-case text-lg">Gaël G.</a></div> <div class="navbar-end"> <div id="change-theme" class="dropdown dropdown-end">  <div tabindex="0" class="btn btn-square btn-ghost" data-svelte-h="svelte-1qtp8cz"><span class="i-heroicons-outline-color-swatch"></span></div>   <ul tabindex="0" class="flex flex-nowrap shadow-2xl menu dropdown-content bg-base-100 text-base-content rounded-box w-52 p-2 gap-2 overflow-y-auto max-h-[21.5rem]"><button data-theme="cmyk" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🖨 Light</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button><button data-theme="dracula" class="btn btn-ghost w-full hover:bg-primary group rounded-lg flex bg-base-100 p-2 transition-all"><p class="flex-1 text-left text-base-content group-hover:text-primary-content transition-color">🌑 Dark</p> <div class="grid grid-cols-4 gap-0.5 m-auto"><div class="bg-primary w-1 h-4 rounded-btn"></div><div class="bg-secondary w-1 h-4 rounded-btn"></div><div class="bg-accent w-1 h-4 rounded-btn"></div><div class="bg-neutral w-1 h-4 rounded-btn"></div></div> </button></ul></div></div></div></header> <button id="totop" aria-label="scroll to top" class="fixed grid group btn btn-circle btn-lg border-none backdrop-blur bottom-6 right-6 z-50 duration-500 ease-in-out btn-ghost bg-base-100/30 md:bg-base-200/30 translate-y-24"> <div class="radial-progress text-accent transition-all duration-500 ease-in-out group-hover:text-[color-mix(in_oklab,oklch(var(--a)),black_7%)] col-start-1 row-start-1" style="--size:4rem; --thickness: 0.25rem; --value:undefined;"></div> <div class="border-4 border-base-content/10 group-hover:border-transparent col-start-1 row-start-1 rounded-full w-full h-full p-4 grid duration-500 ease-in-out" data-svelte-h="svelte-hwvjh5"><span class="i-heroicons-solid-chevron-up !w-6 !h-6"></span></div></button> <div class="bg-base-100 md:bg-base-200 min-h-screen pt-16 md:pb-8 lg:pb-16">  <div class="flex flex-col flex-nowrap justify-center xl:flex-row xl:flex-wrap"><div class="flex-1 w-full order-first ease-out transform mx-auto xl:mr-0 xl:ml-0"></div> <div class="flex-1 w-full xl:order-last ease-out transform mx-auto xl:ml-0 xl:mr-0"></div> <div class="flex-none w-full max-w-screen-md mx-auto xl:mx-0"><article itemscope itemtype="https://schema.org/BlogPosting" itemprop="blogPost" class="h-entry card bg-base-100 rounded-none md:rounded-box md:shadow-xl overflow-hidden z-10 md:mb-8 lg:mb-16">   <div class="card-body gap-0 "><div class="flex flex-col gap-2"><figure class="md:order-last rounded-box shadow-xl mb-4 flex-col gap-2 -mx-4 -mt-8 md:mt-0"><picture><source srcset="/_app/immutable/assets/npm-ssl-certificate.DhzUiNgX.avif 736w" type="image/avif"> <img src="/2023/dns-setup-homelab/npm-ssl-certificate.webp" alt="/2023/dns-setup-homelab/npm-ssl-certificate.webp" class="u-featured" loading="lazy" decoding="async"></picture></figure> <div class="flex font-semibold gap-1.5"><a rel="author" class="opacity-75 hover:opacity-100 hover:text-primary duration-500 ease-in-out p-author h-card" href="https://blog.gothuey.dev">Gaël G.</a> <span class="opacity-50" data-svelte-h="svelte-1edzios">/</span> <a href="/2023/dns-setup-homelab" class="u-url u-uid swap group/time"><time class="group-hover/time:opacity-0 font-semibold opacity-75 duration-500 ease-in-out mr-auto dt-published" datetime="2023-08-01T00:00:00.000Z" itemprop="datePublished">Tuesday, 1 Aug 23</time> <time class="opacity-0 group-hover/time:opacity-100 font-semibold text-primary duration-500 ease-in-out mr-auto dt-updated" datetime="2025-01-25T23:43:32.794Z" itemprop="dateModified">Saturday, 25 Jan 25</time></a></div> <h1 itemprop="name headline" class="card-title text-3xl mb-8 p-name">How to use DNS and TLS in your homelab</h1> <p itemprop="description" class="p-summary mb-auto hidden">Easy TLS certificate set up with Nginx Proxy Manager</p></div> <main itemprop="articleBody" class="urara-prose prose e-content"><h2 id="introduction" data-svelte-h="svelte-ccveyw"><a href="#introduction">Introduction</a></h2> <p data-svelte-h="svelte-90rfaz">In this blog post, we’ll explore an efficient method to set up domain names and valid TLS certificates for your home lab services without exposing them to the public internet. We’ll achieve this by using a reverse proxy and obtaining a valid certificate from Let’s Encrypt, a widely (and free) recognized Certificate Authority (CA).</p> <h3 id="why-using-dns-in-my-homelab-" data-svelte-h="svelte-14ah83r"><a href="#why-using-dns-in-my-homelab-">Why using DNS in my homelab ?</a></h3> <p data-svelte-h="svelte-1dolp5z">I opted to purchase the domain name gothuey.dev from <a href="https://www.infomaniak.com/en/domains" rel="nofollow noopener noreferrer external" target="_blank">Infomaniak</a>. While there are free alternatives available, such as <a href="https://www.duckdns.org/" rel="nofollow noopener noreferrer external" target="_blank">Duck DNS</a>. In my case, I’m going to do the set-up with a domain name purchased from Infomaniak.</p> <p><picture><source srcset="/_app/immutable/assets/example-with-dashboard.7aGqgxQ3.avif 736w" type="image/avif"> <img src="/2023/dns-setup-homelab/example-with-dashboard.webp" alt="Demo with homelab dashboard" class="rounded-lg my-2" loading="lazy" decoding="async"></picture></p> <p data-svelte-h="svelte-4h1ay3">The objective I’m striving for involves utilizing my domain directly – for instance, <code>service.homelab.gothuey.dev</code> (as seen with <code>grafana.homelab.gothuey.dev</code>). This approach empowers me to establish subdomains for various home lab services (Grafana, Jellyfin,.PairDrop,…). By doing so, each service gains a unique and easily recognizable identity, eliminating the need to rely on IP addresses and ports for access.</p> <p data-svelte-h="svelte-1lpvncv">Keep in mind that the setup described in this guide is geared towards optimizing accessibility and organization within a <strong>local network</strong> context. All my services are not exposed outside my network.</p> <h2 id="set-up" data-svelte-h="svelte-1rgn96p"><a href="#set-up">Set up</a></h2> <p data-svelte-h="svelte-1rxh0l">Popular reverse proxies like Nginx, Apache, Swag, or Traefik are excellent choices for setting up in your home lab services. Consider selecting one that aligns with your preferences and suits your specific setup requirements.</p> <p data-svelte-h="svelte-bnwp20">In my scenario, I elected to employ Nginx Proxy Manager (NPM) due to its user-centric configuration process. This tool boasts an intuitive setup, rendering it an optimal choice for individuals who are either newcomers to reverse proxies or enthusiasts of a more simplified configuration journey. Of notable significance, NPM comes equipped with a feature that stands out: native support for <a href="https://letsencrypt.org/docs/challenge-types/#dns-01-challenge" rel="nofollow noopener noreferrer external" target="_blank">Let’s Encrypt Challenge DNS-01</a>, right out of the box.</p> <h3 id="1-install-nginx-proxy-manager-npm" data-svelte-h="svelte-fqfa33"><a href="#1-install-nginx-proxy-manager-npm">1: Install Nginx Proxy Manager (NPM)</a></h3> <p data-svelte-h="svelte-1mjrrl0">For my homelab, which primarily relies on Docker, we can easily install Nginx Proxy Manager (NPM) using the following docker-compose.yml configuration. To proceed, you can follow the steps outlined in the Quick Setup guide available at <a href="https://nginxproxymanager.com/guide/#quick-setup" rel="nofollow noopener noreferrer external" target="_blank">https://nginxproxymanager.com/guide/#quick-setup</a>.</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" yaml="true"><div class="language-id">yaml</div><div class='code-container'><code><div class='line'><span style="color: #F07178">version</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">3.8</span><span style="color: #89DDFF">'</span></div><div class='line'><span style="color: #F07178">services</span><span style="color: #89DDFF">:</span></div><div class='line'><span style="color: #EEFFFF">  </span><span style="color: #F07178">app</span><span style="color: #89DDFF">:</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">image</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">jc21/nginx-proxy-manager:latest</span><span style="color: #89DDFF">'</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">restart</span><span style="color: #89DDFF">:</span><span style="color: #EEFFFF"> </span><span style="color: #C3E88D">unless-stopped</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">ports</span><span style="color: #89DDFF">:</span></div><div class='line'><span style="color: #EEFFFF">      </span><span style="color: #89DDFF">-</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">80:80</span><span style="color: #89DDFF">'</span></div><div class='line'><span style="color: #EEFFFF">      </span><span style="color: #89DDFF">-</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">81:81</span><span style="color: #89DDFF">'</span></div><div class='line'><span style="color: #EEFFFF">      </span><span style="color: #89DDFF">-</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">'</span><span style="color: #C3E88D">443:443</span><span style="color: #89DDFF">'</span></div><div class='line'><span style="color: #EEFFFF">    </span><span style="color: #F07178">volumes</span><span style="color: #89DDFF">:</span></div><div class='line'><span style="color: #EEFFFF">      </span><span style="color: #89DDFF">-</span><span style="color: #EEFFFF"> </span><span style="color: #C3E88D">./data:/data</span></div><div class='line'><span style="color: #EEFFFF">      </span><span style="color: #89DDFF">-</span><span style="color: #EEFFFF"> </span><span style="color: #C3E88D">./letsencrypt:/etc/letsencrypt</span></div><div class='line'></div></code></div></pre><!-- HTML_TAG_END --> <h3 id="2-set-up-a-domain-name-infomaniak" data-svelte-h="svelte-16p6egr"><a href="#2-set-up-a-domain-name-infomaniak">2: Set up a domain name (Infomaniak)</a></h3> <p data-svelte-h="svelte-1ylr6c1">At your Infomaniak manager <a href="https://manager.infomaniak.com/v3/298166/ng/products/web/domains" rel="nofollow noopener noreferrer external" target="_blank">dashboard</a>, choose the domain you want to use.</p> <ol><li data-svelte-h="svelte-1fbcwt7"><p>Select Change the DNS zone and then click on the ADD AN ENTRY button. Here, you can define how you want to design your domain name.</p></li> <li><p data-svelte-h="svelte-1324p8y">Create two entries as follows:</p> <p data-svelte-h="svelte-1koj2em">The first entry should be of <strong>TYPE A</strong>, which will point your domain to your private homelab IP address.</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" text="true"><div class="language-id">text</div><div class='code-container'><code><div class='line'><span style="color: undefined">    Type: A</span></div><div class='line'><span style="color: undefined">    Source: homelab.gothuey.dev (replace by your domain name)</span></div><div class='line'><span style="color: undefined">    target: 192.168.1.3 (replace by your private IP)</span></div><div class='line'><span style="color: undefined">    TTL: 1 hour</span></div></code></div></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-yblaeo">The second entry should be of <strong>TYPE CNAME</strong>, enabling the creation of subdomains like <code>grafana.your-domain.com</code></p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" text="true"><div class="language-id">text</div><div class='code-container'><code><div class='line'><span style="color: undefined">Type: CNAME</span></div><div class='line'><span style="color: undefined">Source: *.homelab.gothuey.dev (replace by your domain name)</span></div><div class='line'><span style="color: undefined">target: homelab.gothuey.dev</span></div><div class='line'><span style="color: undefined">TTL: 1 hour</span></div></code></div></pre><!-- HTML_TAG_END --></li></ol> <p data-svelte-h="svelte-inyfxa">After making the necessary DNS changes, it may take several minutes for your domain to become fully available. To check the availability and ensure the correct configuration, you can use the <code>dig</code> command. When the setup is successful, you should see your private homelab address associated with the A record for your domain.</p> <!-- HTML_TAG_START --><pre class="shiki material-default" style="background-color: #263238; color: #EEFFFF" shell="true"><div class="language-id">shell</div><div class='code-container'><code><div class='line dim'><span style="color: #EEFFFF">$ dig homelab.gothuey.dev</span></div><div class='line'></div><div class='line dim'><span style="color: #89DDFF">;</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">&lt;&lt;</span><span style="color: #89DDFF">&gt;&gt;</span><span style="color: #C3E88D"> DiG 9.16.1-Ubuntu &lt;&lt;&gt;&gt; homelab.gothuey.dev</span></div><div class='line dim'><span style="color: #C3E88D">;; global options: +cmd</span></div><div class='line dim'><span style="color: #C3E88D">;; Got answer:</span></div><div class='line dim'><span style="color: #C3E88D">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 42085</span></div><div class='line dim'><span style="color: #C3E88D">;; flags: qr rd ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</span></div><div class='line dim'><span style="color: #C3E88D">;; WARNING: recursion requested but not available</span></div><div class='line'></div><div class='line dim'><span style="color: #C3E88D">;; QUESTION SECTION:</span></div><div class='line dim'><span style="color: #C3E88D">;homelab.gothuey.dev.           IN      A</span></div><div class='line'></div><div class='line highlight'><span style="color: #C3E88D">;; ANSWER SECTION:</span></div><div class='line highlight'><span style="color: #C3E88D">homelab.gothuey.dev.    0       IN      A       192.168.1.3</span></div><div class='line'></div><div class='line dim'><span style="color: #C3E88D">;; Query time: 19 msec</span></div><div class='line dim'><span style="color: #C3E88D">;; SERVER: 172.30.240.1#53(172.30.240.1)</span></div><div class='line dim'><span style="color: #C3E88D">;; WHEN: Tue Aug 01 16:31:45 CEST 2023</span></div><div class='line dim'><span style="color: #C3E88D">;; MSG SIZE  rcvd: 72</span></div><div class='line'></div></code></div></pre><!-- HTML_TAG_END --> <h3 id="3-issue-a-token-for-certbot-infomaniak" data-svelte-h="svelte-p131ko"><a href="#3-issue-a-token-for-certbot-infomaniak">3: Issue a token for CertBot (Infomaniak)</a></h3> <p data-svelte-h="svelte-3ty63g">As mentioned earlier, Nginx Proxy Manager has the capability to generate and manage TLS certificates for use. It utilizes the <a href="https://github.com/Infomaniak/certbot-dns-infomaniak" rel="nofollow noopener noreferrer external" target="_blank">certbot-dns-infomaniak</a> plugin behind the scenes, which necessitates a token from your Infomaniak dashboard for proper functioning.</p> <ol data-svelte-h="svelte-7czxez"><li>At your Infomaniak manager <a href="https://manager.infomaniak.com/v3/infomaniak-api" rel="nofollow noopener noreferrer external" target="_blank">dashboard</a>, to to the API section and generate a token with “Domain” scope.</li> <li><strong>Keep</strong> this token somewhere safe as we will use it in the next step.</li></ol> <h3 id="4-add-new-certificate-in-npm" data-svelte-h="svelte-ath4e2"><a href="#4-add-new-certificate-in-npm">4: Add new certificate in NPM</a></h3> <ol data-svelte-h="svelte-8xi3oi"><li>Go to Nginx Proxy Manager (<a href="http://192.168.1.3:81/" rel="nofollow noopener noreferrer external" target="_blank">http://192.168.1.3:81/</a>) and navigate to the SSL <strong>Certificates</strong> tab.</li> <li>Click on “Add SSL Certificate” and select “Let’s Encrypt.”</li> <li>Configure your Let’s Encrypt Certificate as follows:<ul><li><strong>Domain Names</strong>: Add the domain and subdomain records.
-Enable the <strong>Use a DNS challenge</strong> option.</li> <li>DNS Provider: Select “Infomaniak.”</li> <li><strong>Credentials File Content</strong>: Replace x values with the token issued in the last step.</li></ul></li> <li>Click on the Save button to save the configuration.</li></ol> <p data-svelte-h="svelte-1r684pz">If the configuration is completed successfully, you should be able to see your certificate.</p> <p><picture><source srcset="/_app/immutable/assets/add-new-certificate.CaNWDbpD.avif 736w" type="image/avif"> <img src="/2023/dns-setup-homelab/add-new-certificate.webp" alt="Generate Certificate" class="rounded-lg my-2" loading="lazy" decoding="async"></picture></p> <h3 id="5-using-dns-with-services" data-svelte-h="svelte-1019cv2"><a href="#5-using-dns-with-services">5: Using DNS with services</a></h3> <p data-svelte-h="svelte-1nifqyk">Now we are ready to set up a proxy entry.  In my case, I would like to direct requests from my Grafana instance, <code>grafana.homelab.gothuey.dev</code>, to be redirected to <code>http://HOMELAB_IP:3002</code>.</p> <ol data-svelte-h="svelte-iul4cr"><li>Begin by navigating to the “Proxy Hosts” tab and selecting “Add Proxy Host.”</li> <li>Configure your host (<strong>⚡Details</strong> tab)<ul><li><strong>Domain Name</strong>s**: <code>HOMELAB_SERVICE.your.domain.name</code></li> <li><strong>Scheme</strong>: http</li> <li><strong>Forward Hostname / IP</strong>: <code>HOMELAB_IP</code></li> <li><strong>Forward Port</strong>: <code>SERVICE_PORT</code></li> <li>Feel free to adjust other settings according to your requirements.</li></ul></li></ol> <img src="/2023/dns-setup-homelab/set-up-host.webp" alt="Set up host" width="400" style="display: block; margin: 0 auto;"> <p data-svelte-h="svelte-175gz6m">Next, proceed to the  <strong>🛡️SLL</strong> tab o choose an SSL certificate for this host:</p> <ul data-svelte-h="svelte-1lp8z3j"><li><strong>SSL Certificate</strong>: Choose the certificate that was created during <a href="#4-add-new-certificate-in-npm">4: Add new certificate in NPM</a></li> <li>Enable <strong>Force SSL</strong> and <strong>HTTP/2 Support</strong></li> <li>Finally, click on the “Save” button to apply these settings</li></ul> <img src="/2023/dns-setup-homelab/select-ssl-certificate.webp" alt="Select certificate" width="400" style="display: block; margin: 0 auto;"> <h3 id="6-lets-test-the-set-up" data-svelte-h="svelte-1920rhn"><a href="#6-lets-test-the-set-up">6: Let’s test the set up</a></h3> <p data-svelte-h="svelte-1pntlwu">To confirm the proper functionality of our proxy setup, let’s conduct a straightforward test.</p> <p data-svelte-h="svelte-1fqzt6">Open your preferred web browser.</p> <p data-svelte-h="svelte-d490gz">In the address bar, enter the URL <a href="https://service.your.domain.name/" rel="nofollow noopener noreferrer external" target="_blank">https://service.your.domain.name/</a> and then press Enter.</p> <p data-svelte-h="svelte-5eqy1g">Upon completing the Grafana setup, my browser automatically redirected me to the Grafana instance situated at <code>http:/HOMELAB_IP:3002</code>. This seamless redirection granted me access to the Grafana dashboard without any SSL/TSL warning.</p> <p><picture><source srcset="/_app/immutable/assets/test-set-up.D9kr3pKU.avif 736w" type="image/avif"> <img src="/2023/dns-setup-homelab/test-set-up.webp" alt="Test proxy" class="rounded-lg my-2" loading="lazy" decoding="async"></picture></p> <h2 id="final-thoughts" data-svelte-h="svelte-2qh8hi"><a href="#final-thoughts">Final thoughts</a></h2> <p data-svelte-h="svelte-1665ptc">This solution provides a straightforward approach for achieving DNS-based access and SSL/TLS encryption without encountering SSL warnings for your local services.</p> <p data-svelte-h="svelte-1j3dsbe">If you’re interested in a visual guide, I recommend watching the <a href="https://youtu.be/qlcVx-k-02E?si=HQnJamrhbyYTaCKU" rel="nofollow noopener noreferrer external" target="_blank">“Quick and Easy SSL Certificates for Your Homelab!” video on Wolfgang’s Channel</a>. Although the video focuses on a similar setup using Duck DNS, the core principles align closely with what we’ve discussed here, offering an additional resource to guide you through the process.</p> <h2 id="useful-resources-" data-svelte-h="svelte-z3y4n5"><a href="#useful-resources-">Useful resources ✨</a></h2> <ul data-svelte-h="svelte-1kbbhsk"><li><a href="https://letsencrypt.org/docs/challenge-types/#dns-01-challenge" rel="nofollow noopener noreferrer external" target="_blank">Let’s Encrypt Challenge DNS-01</a></li> <li><a href="https://youtu.be/qlcVx-k-02E?si=HQnJamrhbyYTaCKU" rel="nofollow noopener noreferrer external" target="_blank">“Quick and Easy SSL Certificates for Your Homelab!” video on Wolfgang’s Channel</a></li> <li><a href="https://nginxproxymanager.com/" rel="nofollow noopener noreferrer external" target="_blank">Nginx Proxy Manager</a></li></ul></main> <div class="divider mt-4 mb-0"></div> <div><a href="/?tags=Home lab" class="btn btn-sm btn-ghost normal-case mt-2 mr-2 p-category">#Home lab </a><a href="/?tags=Container" class="btn btn-sm btn-ghost normal-case mt-2 mr-2 p-category">#Container </a></div></div>  </article> <footer id="footer" class="footer footer-center bg-base-300 text-base-content shadow-inner p-8 md:rounded-box sticky bottom-0 z-0 md:static "><div class="prose"><p><a href="/atom.xml" rel="noopener noreferrer external" target="_blank">Feed</a> <span class="mr-1" data-svelte-h="svelte-1qx196n">·</span><a href="/sitemap.xml" rel="noopener noreferrer external" target="_blank">Sitemap</a>  <br>
      Copyright © 2025 Gaël G. <br>
      Powered by
      <a rel="noopener noreferrer external" target="_blank" class="tooltip tooltip-secondary hover:text-secondary" data-tip="🌸 [δ] - Based on MDsveX & SvelteKit 🌸" href="https://github.com/importantimport/urara" data-svelte-h="svelte-urea7w">Urara</a> </p></div></footer></div></div></div> 
			<script type="application/json" data-sveltekit-fetched data-url="/posts.json">{"status":200,"statusText":"","headers":{},"body":"[{\"title\":\"Platform Engineering: Building a portal for Developers with Backstage\",\"image\":\"/2024/backstage-medium-post/backstage-laptop-banner.webp\",\"summary\":\"My Medium Post about Backstage.io\",\"created\":\"2024-05-17T00:00:00.000Z\",\"tags\":[\"TypeScript\",\"Web\",\"DevOps\"],\"updated\":\"2025-01-25T23:43:32.796Z\",\"images\":[],\"slug\":\"/2024/backstage-medium-post/+page.svelte.md\",\"path\":\"/2024/backstage-medium-post\",\"toc\":[{\"depth\":2,\"title\":\"Check out my article on Backstage\",\"slug\":\"check-out-my-article-on-backstage\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"How to use DNS and TLS in your homelab\",\"image\":\"/2023/dns-setup-homelab/npm-ssl-certificate.webp\",\"summary\":\"Easy TLS certificate set up with Nginx Proxy Manager\",\"created\":\"2023-08-01T00:00:00.000Z\",\"tags\":[\"Home lab\",\"Container\"],\"updated\":\"2025-01-25T23:43:32.794Z\",\"images\":[],\"slug\":\"/2023/dns-setup-homelab/+page.svelte.md\",\"path\":\"/2023/dns-setup-homelab\",\"toc\":[{\"depth\":2,\"title\":\"Introduction\",\"slug\":\"introduction\"},{\"depth\":3,\"title\":\"Why using DNS in my homelab ?\",\"slug\":\"why-using-dns-in-my-homelab-\"},{\"depth\":2,\"title\":\"Set up\",\"slug\":\"set-up\"},{\"depth\":3,\"title\":\"1: Install Nginx Proxy Manager (NPM)\",\"slug\":\"1-install-nginx-proxy-manager-npm\"},{\"depth\":3,\"title\":\"2: Set up a domain name (Infomaniak)\",\"slug\":\"2-set-up-a-domain-name-infomaniak\"},{\"depth\":3,\"title\":\"3: Issue a token for CertBot (Infomaniak)\",\"slug\":\"3-issue-a-token-for-certbot-infomaniak\"},{\"depth\":3,\"title\":\"4: Add new certificate in NPM\",\"slug\":\"4-add-new-certificate-in-npm\"},{\"depth\":3,\"title\":\"5: Using DNS with services\",\"slug\":\"5-using-dns-with-services\"},{\"depth\":3,\"title\":\"6: Let’s test the set up\",\"slug\":\"6-lets-test-the-set-up\"},{\"depth\":2,\"title\":\"Final thoughts\",\"slug\":\"final-thoughts\"},{\"depth\":2,\"title\":\"Useful resources ✨\",\"slug\":\"useful-resources-\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Vaporflow Start page\",\"image\":\"/2023/vaporflow-startpage/vaporflow-startpage.webp\",\"summary\":\"A browser start page with daisyui distinctive aesthetic, featuring OpenWeather\",\"created\":\"2023-04-29T00:00:00.000Z\",\"tags\":[\"TypeScript\",\"Web\"],\"updated\":\"2025-01-25T23:43:32.796Z\",\"images\":[],\"slug\":\"/2023/vaporflow-startpage/+page.svelte.md\",\"path\":\"/2023/vaporflow-startpage\",\"toc\":[{\"depth\":2,\"title\":\"Introduction\",\"slug\":\"introduction\"},{\"depth\":2,\"title\":\"The idea\",\"slug\":\"the-idea\"},{\"depth\":2,\"title\":\"The implementation\",\"slug\":\"the-implementation\"},{\"depth\":2,\"title\":\"Lessons Learned\",\"slug\":\"lessons-learned\"},{\"depth\":2,\"title\":\"Conclusion\",\"slug\":\"conclusion\"},{\"depth\":2,\"title\":\"Useful resources ✨\",\"slug\":\"useful-resources-\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Give a second life to my 2011 Mac mini\",\"image\":\"/2023/mac-mini-as-homeserver/mac-mini-homelab.webp\",\"summary\":\"Recycling your 2011 Mac mini into a Home lab Server\",\"created\":\"2023-02-09T00:00:00.000Z\",\"tags\":[\"Home lab\",\"Container\"],\"updated\":\"2025-01-25T23:43:32.795Z\",\"images\":[],\"slug\":\"/2023/mac-mini-as-homeserver/+page.svelte.md\",\"path\":\"/2023/mac-mini-as-homeserver\",\"toc\":[{\"depth\":2,\"title\":\"Introduction\",\"slug\":\"introduction\"},{\"depth\":2,\"title\":\"Hardware upgrade\",\"slug\":\"hardware-upgrade\"},{\"depth\":2,\"title\":\"Set up\",\"slug\":\"set-up\"},{\"depth\":3,\"title\":\"Operating system\",\"slug\":\"operating-system\"},{\"depth\":3,\"title\":\"Reboot on power failure\",\"slug\":\"reboot-on-power-failure\"},{\"depth\":2,\"title\":\"Containers\",\"slug\":\"containers\"},{\"depth\":2,\"title\":\"Final thoughts\",\"slug\":\"final-thoughts\"},{\"depth\":2,\"title\":\"Useful resources ✨\",\"slug\":\"useful-resources-\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Swiss deals API\",\"image\":\"/2022/swiss-deals-api/swiss-deals-api-bg.webp\",\"summary\":\"An API that aggregates the offers of the day\",\"created\":\"2022-10-20T00:00:00.000Z\",\"tags\":[\"API\",\"Go\"],\"updated\":\"2025-01-25T23:43:32.791Z\",\"images\":[],\"slug\":\"/2022/swiss-deals-api/+page.svelte.md\",\"path\":\"/2022/swiss-deals-api\",\"toc\":[{\"depth\":2,\"title\":\"Introduction\",\"slug\":\"introduction\"},{\"depth\":2,\"title\":\"Building API with Golang\",\"slug\":\"building-api-with-golang\"},{\"depth\":3,\"title\":\"Retrieve data\",\"slug\":\"retrieve-data\"},{\"depth\":3,\"title\":\"Golang frameworks\",\"slug\":\"golang-frameworks\"},{\"depth\":3,\"title\":\"Environnement\",\"slug\":\"environnement\"},{\"depth\":2,\"title\":\"Demo\",\"slug\":\"demo\"},{\"depth\":2,\"title\":\"Final thoughts\",\"slug\":\"final-thoughts\"},{\"depth\":2,\"title\":\"Next steps\",\"slug\":\"next-steps\"}],\"type\":\"article\",\"html\":\"\"},{\"title\":\"Yup, an other blog\",\"image\":\"/2022/yup-an-other-blog/yup-an-other-blog.webp\",\"summary\":\"Hello World! 👋🏽\",\"created\":\"2022-08-01T00:00:00.000Z\",\"updated\":\"2025-01-25T23:43:32.793Z\",\"images\":[],\"tags\":[],\"slug\":\"/2022/yup-an-other-blog/+page.svelte.md\",\"path\":\"/2022/yup-an-other-blog\",\"toc\":[{\"depth\":2,\"title\":\"Hello World! 👋🏽\",\"slug\":\"hello-world-\"},{\"depth\":3,\"title\":\"About me\",\"slug\":\"about-me\"},{\"depth\":3,\"title\":\"Scope\",\"slug\":\"scope\"},{\"depth\":3,\"title\":\"Everything is Markdown\",\"slug\":\"everything-is-markdown\"},{\"depth\":3,\"title\":\"Final word\",\"slug\":\"final-word\"}],\"type\":\"article\",\"html\":\"\"},{\"flags\":[\"unlisted\"],\"title\":\"Elements\",\"created\":\"2021-12-12T00:00:00.000Z\",\"updated\":\"2025-01-25T23:43:32.802Z\",\"images\":[],\"tags\":[],\"slug\":\"/hello-world/elements/+page.svelte.md\",\"path\":\"/hello-world/elements\",\"toc\":[{\"depth\":2,\"title\":\"Headings\",\"slug\":\"headings\"},{\"depth\":3,\"title\":\"Heading\",\"slug\":\"heading\"},{\"depth\":4,\"title\":\"Heading\",\"slug\":\"heading-1\"},{\"depth\":5,\"title\":\"Heading\",\"slug\":\"heading-2\"},{\"depth\":6,\"title\":\"Heading\",\"slug\":\"heading-3\"},{\"depth\":2,\"title\":\"Paragraphs\",\"slug\":\"paragraphs\"},{\"depth\":2,\"title\":\"Lists\",\"slug\":\"lists\"},{\"depth\":3,\"title\":\"Definition List (dl)\",\"slug\":\"definition-list-dl\"},{\"depth\":3,\"title\":\"Ordered List (ol)\",\"slug\":\"ordered-list-ol\"},{\"depth\":3,\"title\":\"Unordered List (ul)\",\"slug\":\"unordered-list-ul\"},{\"depth\":3,\"title\":\"Checkbox List (ul)\",\"slug\":\"checkbox-list-ul\"},{\"depth\":2,\"title\":\"Table\",\"slug\":\"table\"},{\"depth\":2,\"title\":\"Footnotes\",\"slug\":\"footnotes\"},{\"depth\":2,\"title\":\"Code\",\"slug\":\"code\"},{\"depth\":2,\"title\":\"Misc\",\"slug\":\"misc\"},{\"depth\":2,\"title\":\"Svelte Components\",\"slug\":\"svelte-components\"}],\"type\":\"article\",\"html\":\"\"},{\"flags\":[\"unlisted\"],\"title\":\"ToC Disabled\",\"summary\":\"This post has disabled table of contents.\",\"created\":\"2021-12-12T00:00:00.000Z\",\"toc\":false,\"updated\":\"2025-01-25T23:43:32.802Z\",\"images\":[],\"tags\":[],\"slug\":\"/hello-world/toc-disabled/+page.md\",\"path\":\"/hello-world/toc-disabled\",\"type\":\"article\",\"html\":\"\"},{\"flags\":[\"unlisted\"],\"title\":\"Hello World\",\"image\":\"/hello-world/urara.webp\",\"alt\":\"Urara\",\"created\":\"2021-11-01T00:00:00.000Z\",\"updated\":\"2021-12-12T00:00:00.000Z\",\"tags\":[],\"images\":[],\"slug\":\"/hello-world/+page.svelte.md\",\"path\":\"/hello-world\",\"toc\":[{\"depth\":2,\"title\":\"Developing\",\"slug\":\"developing\"},{\"depth\":2,\"title\":\"Building\",\"slug\":\"building\"},{\"depth\":2,\"title\":\"Documentation\",\"slug\":\"documentation\"}],\"type\":\"article\",\"html\":\"\"}]"}</script>
			<script>
				{
					__sveltekit_i2tl4l = {
						base: new URL("../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../../_app/immutable/entry/start.6hVF5jkV.js"),
						import("../../_app/immutable/entry/app.B8tIka57.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
  </body>
</html>
